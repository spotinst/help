# Configure Vulnerability Scan

To view all the accounts that have vulnerability scanning enabled, complete the following steps:  

1. In the left main menu, click **Spot Security** and click Administration. 
2. Click the **Cloud Accounts** tab. You can view all of the onboarded accounts. 

![vuln-conf-1](https://github.com/spotinst/help/assets/106514736/881d0ecf-dc3d-4452-b1d7-0bbf967d78fa)

There are 3 states of accounts regarding vulnerability configuration: 

* Vulnerability is not configured: the toggle in the Vulnerability Enabled column is off and can not be turned on. 
* Vulnerability is configured and running: the toggle in the Vulnerability Enabled column is on. 
* Vulnerability is configured but temporarily disabled: the toggle in the Vulnerability Enabled column will be off but you can turn it on.  

## Prerequisites 

* The account must be onboarded on Spot Security and data collection must be complete. 
* For each region of the accounts that you are planning to onboard, Spot recommends having public Subnet IDs that enable connection using a NAT Gateway. 
* The same Subnet ID should have Enable auto-assign public IPV4 address in the subnet settings. 
* If the above is not enabled, there is a default quota of five Elastic IPs per account per region. Spot Security will create an elastic IP for the scanner instance. Log in to your AWS account, click [here](https://signin.aws.amazon.com/signin?redirect_uri=https%3A%2F%2Fus-east-1.console.aws.amazon.com%2Fservicequotas%2Fhome%2Fservices%2Fec2%2Fquotas%2FL-0263D0A3%3FhashArgs%3D%2523%26isauthcode%3Dtrue%26region%3Dus-east-1%26state%3DhashArgsFromTB_us-east-1_fe71330de849a6a6&client_id=arn%3Aaws%3Asignin%3A%3A%3Aconsole%2Fservicequotas&forceMobileApp=0&code_challenge=BV7Rv_-MCWX-X_53yskcrPIW1unuCVvUhDL8zvTaEmQ&code_challenge_method=SHA-256) and select the appropriate to check adequate capacity available to create a single Elastic IP address for Spot-Security in that account and region.
 
## Configure a Vulnerability Scan

Complete the following steps to configure a vulnerability: 
 
1. In the Cloud Accounts tab in the Administration page, click **Cloud Account** on the top right. 

![vuln-conf-2](https://github.com/spotinst/help/assets/106514736/e53cb10c-d09a-4c9b-973c-75d9287450f0)

2. Click **Configure Vulnerability**. The Vulnerability Scanning Setup window opens. 

![vuln-conf-3](https://github.com/spotinst/help/assets/106514736/f0ebcd85-9a15-4bc6-b55d-3e8ecb5d1ef6)

3. Click **Log in to AWS account** to log in to the account that you want to set up a vulnerability for. 
4. Select the name of your AWS account in the dropdown menu and you will have the option to run the template provided by Spot Security. 

![vuln-conf-4](https://github.com/spotinst/help/assets/106514736/d7b22d9b-0745-4d5c-8537-bdcf0bc2b4a1)

5. Click **Run Template**.
6. Enter the organisation ID and wait until the cloudformation template has run successfully as displayed below.  

![vuln-conf-5](https://github.com/spotinst/help/assets/106514736/e9ab4248-7c85-4732-afa3-c0ff6b4ace8d)
 
7. Click the **Output** tab and copy the value column. 
8. Enter the Role ARN in the Role ARN field in the Spot Security console.  

![vuln-conf-6](https://github.com/spotinst/help/assets/106514736/fcce1031-d6d1-4db4-8094-1394933809d0)

9. By default all the regions that have VMs will be pre-populated for a selected account. You can add or delete any region you want. For each region, select a Subnet ID where Spot Security Scanner will run. 
* The list will contain only public Subnet IDs that enable connection using a NAT Gateway. 
* Spot Security reccomends enabling **Enable auto-assign public IPV4 address** in the Subnet settings.  
* If it is not enabled, Spot Security will create an elastic IP for the scanner instance.  
* There is a default quota of five Elastic IPs per account per region. To use this you have to make sure your limit has not exceeded or click https://docs.aws.amazon.com/servicequotas/latest/userguide/request-quota-increase.html and request to increase the quota. 
* Adding a new subnet to the dropdown menu takes 30 mins to 1 hour. 

>Note: If there is no public subnet available in the VPC for the selected region that enables connection using a NAT gateway, you need to manually create a public subnet and attach a NAT gateway to it and enter the Subnet ID in the field. In this case, ensure that the points above are addressed.

![vuln-conf-7](https://github.com/spotinst/help/assets/106514736/8e6f8a88-0d41-4396-a2c3-3ef343e43bc1)

To add a new account click **Add Count** and repeat the same process starting from step 3 in [Configure a Vulnerability Scan](spot-security/features/vulnerability/configure?id=configure-a-vulnerability-scan). 

You can disable vulnerability scanning for any account by turning the toggles off in the Vulnerbiility Enabled column and it will pause the scanning for that account until the toggle is turned back on. The last scanned data will remain in the system. 

You can delete vulnerability scanning for any account by selecting one of the accounts. In the top right, click **Action** and then click **Delete Vulnerability Configuration**. 

![vuln-conf-8](https://github.com/spotinst/help/assets/106514736/71c22971-1644-46fd-9ce7-7d26888c2b5c)

Confirm that you agree to deleting all the vulnerabilities permanently from the Spot Security console. Spot Security deletes the scanning and the data within 24 to 48 hours. 

## Whatâ€™s Next? 

Learn more about the [Vulnerability Dashboard](spot-security/features/vulnerability/dashboard). 
