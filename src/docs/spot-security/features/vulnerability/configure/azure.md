# Configure Vulnerability Scan for Azure 

This procedure describes how to configure vulnerability scans for Azure accounts. 

## Sign in to Azure Account 

1. In the Administration page, under the Cloud Accounts tab, click **Cloud Account** on the top right and click on **Configure VA** and select **Azure**. 
2. Click **Login** to log in to the account that you want to set up a vulnerability for.  

![vln-cnfg-azure-1](https://github.com/spotinst/help/assets/106514736/e3cee626-c6bd-47e8-878a-218f2b8b4d4b)

3. Select the name of your Azure account in the dropdown menu and click **Vulnerability Scanning JSON** to download the JSON Policy from the Spot Security Vulnerability Scanning Setup page. 

![vln-cnfg-azure-2](https://github.com/spotinst/help/assets/106514736/295e24ad-ce26-4942-9857-5c2f6cf92a28)

## Create a Custom Role 

1. In the Azure console, type **Subscriptions** in the search bar and click the **Subscriptions** result that appears. 
2. Select the subscription you want to onboard. 
3. In the menu on the left side of the selected subscription platform, click **Access Control (IAM)**. 
4. Click **+ Add** and then **Add custom role**.

![vln-cnfg-azure-3](https://github.com/spotinst/help/assets/106514736/25a511e3-b1ce-49c4-822c-6e9772378371)

5. Selectâ€¯**Start from JSON** and upload the JSON policy downloaded in Step 1. 

![vln-cnfg-azure-4](https://github.com/spotinst/help/assets/106514736/ab1f6f44-5230-413e-b466-17af3bed0ce5)

6. Click **Assignable scope** and select the relevant subscription. 

![vln-cnfg-azure-5](https://github.com/spotinst/help/assets/106514736/fa1d5ac7-67cd-4deb-b638-9e828610f544)

7. In the **Create a custom role** window, click **Review + create** and complete the custom role information. 

## Assign a Role 

1. In the Access control (IAM) platform, click **+ Add** and then click **Add role assignment**. 

![vln-cnfg-azure-6](https://github.com/spotinst/help/assets/106514736/dab7d1f2-60f4-44ad-a3eb-051dca17fcab)

2. Click the **Role** tab and select the custom role you created in the previous step.  

![vln-cnfg-azure-7](https://github.com/spotinst/help/assets/106514736/e7e4fbd2-fd26-4390-920a-c3ace755dc78)

3. Click the **Members** tab and click **Select members**. 

![vln-cnfg-azure-8](https://github.com/spotinst/help/assets/106514736/582c2cb2-9428-4905-a26c-ad06949e0747)

4. Select the app registration that was created during the Spot onboarding and click **Next**. 
5. When the Role is assigned, go back to the Spot console to finish the vulnerability scan configuration.  
6. By default all the regions that have VMs will be pre-populated for a selected account. You can delete regions according to your preference. For each region, select a Subnet ID where the Spot Security Scanner will run. 

* While choosing the Subnet ID, ensure it allows SSH inbound and Internet outbound. 

![vln-cnfg-azure-9](https://github.com/spotinst/help/assets/106514736/0a863762-d26e-43f6-8ef9-7b221976866a)

* You can also create a new public Subnet ID with the above condition and manually enter it. 

![vln-cnfg-azure-10](https://github.com/spotinst/help/assets/106514736/509e8cec-ff6f-4522-b1af-0892e46c8925)

To add a new account click **Add Account** and repeat the same process starting from Step 2. 

## What's Next?

Learn more about the [dashboard](spot-security/features/vulnerability/dashboard).
